"use strict";(self.webpackChunkmesodocs=self.webpackChunkmesodocs||[]).push([[83],{4137:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>g});var o=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,o,l=function(e,n){if(null==e)return{};var t,o,l={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=o.createContext({}),i=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=i(e.components);return o.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},c=o.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=u(e,["components","mdxType","originalType","parentName"]),p=i(t),c=l,g=p["".concat(s,".").concat(c)]||p[c]||m[c]||r;return t?o.createElement(g,a(a({ref:n},d),{},{components:t})):o.createElement(g,a({ref:n},d))}));function g(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,a=new Array(r);a[0]=c;var u={};for(var s in n)hasOwnProperty.call(n,s)&&(u[s]=n[s]);u.originalType=e,u[p]="string"==typeof e?e:l,a[1]=u;for(var i=2;i<r;i++)a[i]=t[i];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}c.displayName="MDXCreateElement"},3351:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>u,toc:()=>i});var o=t(7462),l=(t(7294),t(4137));const r={title:"Environnements logiciels",sidebar_position:5},a="Gestion de l'Environnement",u={unversionedId:"code_form/hedy/module",id:"code_form/hedy/module",title:"Environnements logiciels",description:"Pour garantir que votre shell fonctionne correctement sur le cluster Hedy, nous utilisons un syst\xe8me appel\xe9 Modules. Son but principal est de simplifier la configuration initiale.",source:"@site/docs/code_form/hedy/module.md",sourceDirName:"code_form/hedy",slug:"/code_form/hedy/module",permalink:"/documentation/user-documentation/code_form/hedy/module",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Environnements logiciels",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Lancer un calcul",permalink:"/documentation/user-documentation/code_form/hedy/jobs"},next:{title:"Noeud de visulation",permalink:"/documentation/user-documentation/code_form/hedy/visu"}},s={},i=[{value:"module list",id:"module-list",level:2},{value:"module avail",id:"module-avail",level:2},{value:"module load",id:"module-load",level:2},{value:"module remove",id:"module-remove",level:2},{value:"module purge",id:"module-purge",level:2},{value:"module swap",id:"module-swap",level:2}],d={toc:i},p="wrapper";function m(e){let{components:n,...t}=e;return(0,l.kt)(p,(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"gestion-de-lenvironnement"},"Gestion de l'Environnement"),(0,l.kt)("p",null,"Pour garantir que votre shell fonctionne correctement sur le cluster ",(0,l.kt)("strong",{parentName:"p"},"Hedy"),", nous utilisons un syst\xe8me appel\xe9 ",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("a",{parentName:"strong",href:"https://lmod.readthedocs.io/en/latest/index.html"},"Modules")),". Son but principal est de simplifier la configuration initiale."),(0,l.kt)("p",null,"Concr\xe8tement, l'outil Modules permet \xe0 chaque utilisateur de modifier son environnement facilement. Il y parvient en utilisant des fichiers de configuration qui contiennent tous les r\xe9glages pour qu'une application sp\xe9cifique soit pr\xeate \xe0 l'emploi. Vous avez acc\xe8s \xe0 de nombreux programmes d\xe9j\xe0 install\xe9s via ces modules."),(0,l.kt)("h1",{id:"utilisation-du-syst\xe8me-de-modules"},"UTILISATION DU SYST\xc8ME DE MODULES"),(0,l.kt)("h2",{id:"module-list"},"module list"),(0,l.kt)("p",null,"Pour lister les modules charg\xe9s dans votre environnement, vous pouvez utiliser la commande ",(0,l.kt)("strong",{parentName:"p"},"module list")," (ou son raccourci ",(0,l.kt)("strong",{parentName:"p"},"ml list"),") :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module list\nNo modules loaded\n[user@m-login02 ~]$ ml list\nNo modules loaded\n")),(0,l.kt)("p",null,"On voit qu'au d\xe9part, aucun module n'est charg\xe9 et l'environnement de travail est propre."),(0,l.kt)("h2",{id:"module-avail"},"module avail"),(0,l.kt)("p",null,"La commande ",(0,l.kt)("strong",{parentName:"p"},"module avail")," (",(0,l.kt)("strong",{parentName:"p"},"ml avail"),") permet d'obtenir la liste des modules install\xe9s sur le cluster."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module avail \n\n----------------------------------------------------------------- /opt/ohpc/pub/modulefiles -----------------------------------------------------------------\n   R-Studio/2024.04.1                 cuda-nccl/2.21.5-cuda12.5                gdb/16.3         (D)    octave/10.2.0          (D)    pmix/4.2.9\n   R-Studio/2025.05.1          (D)    cuda-nccl/2.27.3-cuda12.9         (D)    gnu12/12.2.0            openjdk/21                    prun/2.2\n   R/4.4.0                            cuda-tensorrt/10.0.1.6-cuda12.4          gnu13/13.2.0            openjdk/24             (D)    python/3.12.4\n   R/4.5.0                     (D)    cuda-tensorrt/10.11.0.33-cuda12.9 (D)    hwloc/2.12.0            os                            python/3.13.4    (D)\n   autotools                          cuda-toolkit/12.4                        intel/2023.2.1          paraview/5.12.1-egl           ucx/1.18.0\n   blender/4.1.1                      cuda-toolkit/12.5                        intel/2024.0.0   (D)    paraview/5.12.1-mpi    (D)    valgrind/3.24.0\n   blender/4.4.3               (D)    cuda-toolkit/12.6                        intel/2024.1.2          paraview/5.12.1-osmesa        visit/3.4.1-beta\n   cmake/4.0.0                        cuda-toolkit/12.8                        intel/2024.2.1          paraview/5.13.3-egl           visit/3.4.2      (D)\n   cuda-cuddn/9.2.0.82-cuda12         cuda-toolkit/12.9                 (D)    libfabric/1.18.0        paraview/5.13.3-mpi\n   cuda-cuddn/9.10.2.21_cuda12 (D)    gdb/14.2                                 octave/9.2.0            paraview/5.13.3-osmesa\n\n  Where:\n   D:  Default Module\n")),(0,l.kt)("p",null,"Certains modules ont des tags entre parenth\xe8ses. Ces modules repr\xe9sentent les modules qui seront charg\xe9s par d\xe9faut si on ne pr\xe9cise pas de version de module. "),(0,l.kt)("p",null,"La liste peut \xeatre un peu longue, il est pr\xe9f\xe9rable d'affiner ses recherches avec le nom d'une application, par exemple :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module avail cuda\n\n----------------------------------------------------------------- /opt/ohpc/pub/modulefiles -----------------------------------------------------------------\n   cuda-cuddn/9.2.0.82-cuda12         cuda-nccl/2.27.3-cuda12.9         (D)    cuda-toolkit/12.4    cuda-toolkit/12.8\n   cuda-cuddn/9.10.2.21_cuda12 (D)    cuda-tensorrt/10.0.1.6-cuda12.4          cuda-toolkit/12.5    cuda-toolkit/12.9 (D)\n   cuda-nccl/2.21.5-cuda12.5          cuda-tensorrt/10.11.0.33-cuda12.9 (D)    cuda-toolkit/12.6\n")),(0,l.kt)("h2",{id:"module-load"},"module load"),(0,l.kt)("p",null,"Prenons l'exemple de ",(0,l.kt)("strong",{parentName:"p"},"python3.12"),". Voici ce qui se passe si vous recherchez ",(0,l.kt)("strong",{parentName:"p"},"python3.12")," dans votre environnement sans charger de module :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ which python3.12\n/usr/bin/which: no python3.12 in (/home/user/.local/bin:/home/user/bin:/etc/slurm/bin:/etc/slurm/svisu/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/dell/srvadmin/bin)\n")),(0,l.kt)("p",null,"Cette version de Python n'appara\xeet pas dans votre environnement, et par cons\xe9quent vous ne pouvez pas l'utiliser. Il faut donc charger le bon module avec la commande ",(0,l.kt)("strong",{parentName:"p"},"module load")," (ou son raccourci ",(0,l.kt)("strong",{parentName:"p"},"ml load"),") :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module load python/3.12\n\n[user@m-login02 ~]$ module list\nCurrently Loaded Modules:\n  1) python/3.12.4\n\n[user@m-login02 ~]$ which python3.12\n/opt/ohpc/pub/apps/python/3.12.4/bin/python3.12\n")),(0,l.kt)("p",null,"On voit que maintenant ",(0,l.kt)("strong",{parentName:"p"},"python3.12")," est utilisable. Tous les modules requis en tant que d\xe9pendances seront identifi\xe9s et charg\xe9s automatiquement, le cas \xe9ch\xe9ant."),(0,l.kt)("h2",{id:"module-remove"},"module remove"),(0,l.kt)("p",null,"Lorsque vous ne voulez plus utiliser un module, vous pouvez le supprimer de votre environnement avec la commande ",(0,l.kt)("strong",{parentName:"p"},"module remove")," (ou ses raccourcis ",(0,l.kt)("strong",{parentName:"p"},"module rm")," ou ",(0,l.kt)("strong",{parentName:"p"},"ml rm"),") :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module list\nCurrently Loaded Modules:\n  1) python/3.12.4\n\n[user@m-login02 ~]$ module remove python/3.12.4 \n\n[user@m-login02 ~]$ module list\nNo modules loaded\n")),(0,l.kt)("p",null,'Module va g\xe9rer de mani\xe8re "intelligente" les d\xe9pendances, si vous enlevez un module dont d\xe9pend d\'autres modules, tous les modules seront d\xe9charg\xe9s.'),(0,l.kt)("h2",{id:"module-purge"},"module purge"),(0,l.kt)("p",null,"Vous pouvez supprimer tous vos modules d'un coup pour repartir sur une base nouvelle avec ",(0,l.kt)("strong",{parentName:"p"},"module purge")," (",(0,l.kt)("strong",{parentName:"p"},"ml purge"),")"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module list\nCurrently Loaded Modules:\n  1) python/3.13.4   2) cuda-nccl/2.27.3-cuda12.9   3) autotools\n\n[user@m-login02 ~]$ module purge\n\n[user@m-login02 ~]$ module list\nNo modules loaded\n")),(0,l.kt)("h2",{id:"module-swap"},"module swap"),(0,l.kt)("p",null,"Il est possible de remplacer un module par un autre avec une seule commande ",(0,l.kt)("strong",{parentName:"p"},"module swap")," (",(0,l.kt)("strong",{parentName:"p"},"ml sw"),") :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"[user@m-login02 ~]$ module list \nCurrently Loaded Modules:\n  1) python/3.12.4\n\n[user@m-login02 ~]$ module swap python/3.12.4 python/3.13.4 \nThe following have been reloaded with a version change:\n  1) python/3.12.4 => python/3.13.4\n\n[user@m-login02 ~]$ module list \nCurrently Loaded Modules:\n  1) python/3.13.4\n")),(0,l.kt)("p",null,"Ici on remplace le module ",(0,l.kt)("strong",{parentName:"p"},"python3.12")," par le module ",(0,l.kt)("strong",{parentName:"p"},"python3.13"),". Les d\xe9pendances sont g\xe9r\xe9es automatiquement, le cas \xe9ch\xe9ant."))}m.isMDXComponent=!0}}]);