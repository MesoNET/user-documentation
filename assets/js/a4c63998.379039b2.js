"use strict";(self.webpackChunkmesodocs=self.webpackChunkmesodocs||[]).push([[9664],{4137:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>S});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},s=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=u(t),d=o,S=m["".concat(p,".").concat(d)]||m[d]||c[d]||a;return t?r.createElement(S,l(l({ref:n},s),{},{components:t})):r.createElement(S,l({ref:n},s))}));function S(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=d;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[m]="string"==typeof e?e:o,l[1]=i;for(var u=2;u<a;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},8237:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var r=t(7462),o=(t(7294),t(4137));const a={title:"La dynamique mol\xe9culaire",sidebar_position:12},l=void 0,i={unversionedId:"arch_exp/turpan/logiciels/dynamique_mol\xe9culaire",id:"arch_exp/turpan/logiciels/dynamique_mol\xe9culaire",title:"La dynamique mol\xe9culaire",description:"Les modules disponibles sont:",source:"@site/docs/arch_exp/turpan/logiciels/dynamique_mol\xe9culaire.md",sourceDirName:"arch_exp/turpan/logiciels",slug:"/arch_exp/turpan/logiciels/dynamique_mol\xe9culaire",permalink:"/documentation/user-documentation/arch_exp/turpan/logiciels/dynamique_mol\xe9culaire",draft:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"La dynamique mol\xe9culaire",sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"Cr\xe9er un conteneur",permalink:"/documentation/user-documentation/arch_exp/turpan/logiciels/container/custum_apptainer"},next:{title:"Ressources pour l'IA",permalink:"/documentation/user-documentation/arch_exp/turpan/ressources_ia/"}},p={},u=[{value:"LAMMPS",id:"lammps",level:2},{value:"Kokkos GPU-MPI",id:"kokkos-gpu-mpi",level:4},{value:"GNU-CUDA",id:"gnu-cuda",level:4},{value:"GROMACS",id:"gromacs",level:2},{value:"AMBER",id:"amber",level:2}],s={toc:u},m="wrapper";function c(e){let{components:n,...t}=e;return(0,o.kt)(m,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Les modules disponibles sont:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"LAMMPS"),(0,o.kt)("li",{parentName:"ul"},"GROMACS"),(0,o.kt)("li",{parentName:"ul"},"AMBER")),(0,o.kt)("h2",{id:"lammps"},"LAMMPS"),(0,o.kt)("p",null,"LAMMPS (Large-scale Atomic/Molecular Massively Parallel Simulator) est un logiciel de dynamique mol\xe9culaire hautement parall\xe9lis\xe9, con\xe7u pour simuler des syst\xe8mes atomiques, mol\xe9culaires ou m\xe9soscopiques. Il est particuli\xe8rement utilis\xe9 pour la mod\xe9lisation des mat\xe9riaux, des polym\xe8res, des m\xe9taux et des fluides complexes."),(0,o.kt)("p",null,"\xab Il y a deux modules disponibles : l\u2019un avec GNU-CUDA et l\u2019autre avec le support de Kokkos. \xbb"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"#!/bin/bash\n#SBATCH -J lammps-run\n#SBATCH -N 1\n#SBATCH -n 2\n#SBATCH --gres=gpu:2\n#SBATCH --cpus-per-task=1\n\nexport OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\nexport OMP_PROC_BIND=close\n")),(0,o.kt)("h4",{id:"kokkos-gpu-mpi"},"Kokkos GPU-MPI"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"module purge\nmodule load lammps/lammps_kakos\nmpirun -np ${ntasks} --mca pml ucx -x UCX_NET_DEVICES=all --map-by ppr:80:node:PE=$SLURM_CPUS_PER_TASK --bind-to core lmp -k on g 2 -sf kk -pk kokkos -in in.file\n\n")),(0,o.kt)("h4",{id:"gnu-cuda"},"GNU-CUDA"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"module purge\nmodule load lammps/lammps_gnu_cuda\n")),(0,o.kt)("p",null,"Il existe plusieurs fa\xe7ons d\u2019ex\xe9cuter le programme ; vous pouvez en choisir une parmi les suivantes"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# MPI\nmpirun -np $SLURM_NTASKS --mca pml ucx -x UCX_NET_DEVICES=all --map-by ppr:80:node:PE=$SLURM_CPUS_PER_TASK --bind-to core lmp -in in.file\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# MPI OMP (lmp -sf omp )\nmpirun -np $SLURM_NTASKS --mca pml ucx -x UCX_NET_DEVICES=all --map-by ppr:80:node:PE=$SLURM_CPUS_PER_TASK --bind-to core lmp -sf omp -in in.file\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# GPU cuda (lmp -sf gpu )\nexport CUDA_VISIBLE_DEVIES=0,1\nmpirun -np $SLURM_NTASKS --mca pml ucx -x UCX_NET_DEVICES=all --map-by ppr:80:node:PE=$SLURM_CPUS_PER_TASK --bind-to core lmp -sf gpu -in in.file\n")),(0,o.kt)("h2",{id:"gromacs"},"GROMACS"),(0,o.kt)("p",null,"GROMACS est un logiciel open source sp\xe9cialis\xe9 dans la dynamique mol\xe9culaire, principalement utilis\xe9 pour l\u2019\xe9tude des biomol\xe9cules comme les prot\xe9ines, les lipides et les acides nucl\xe9iques. Il est reconnu pour sa rapidit\xe9 et son efficacit\xe9 sur les architectures parall\xe8les, notamment les GPU."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"#!/bin/bash\n#SBATCH --job-name=gmx_mpi_gpu\n#SBATCH --nodes=1\n#SBATCH --ntasks-per-node=16\n#SBATCH --gres=gpu:2\n#SBATCH --cpus-per-task=4\n#SBATCH --time=00:30:00\n#SBATCH --partition=small\n#SBATCH -o gmx_%j.out\n#SBATCH -e gmx_%j.err\n\n# Chargement des modules\nmodule purge\nmodule load gromacs/2024.6\n\nsource $GMXRC\n\n# Commande MPI explicite\nmpirun -np $SLURM_NTASKS \\\n    --hostfile hosts.txt \\\n    --map-by ppr:$SLURM_NTASKS:node:PE=$SLURM_CPUS_PER_TASK \\\n    --bind-to core \\\n    gmx_mpi mdrun \\\n        -s benchPEP.tpr \\\n        -deffnm benchPEP \\\n        -ntomp $SLURM_CPUS_PER_TASK \\\n        -nb gpu \\\n        -pin on -v\n")),(0,o.kt)("admonition",{title:"Important",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"N'oubliez pas ",(0,o.kt)("inlineCode",{parentName:"p"},"source $GMXRC")," ")),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Si vous lancez un calcul sans ",(0,o.kt)("inlineCode",{parentName:"p"},"mpirun"),", et que vous ne d\xe9finissez pas ",(0,o.kt)("inlineCode",{parentName:"p"},"--cpus-per-task")," ou ",(0,o.kt)("inlineCode",{parentName:"p"},"OMP_NUM_THREADS"),", le programme utilisera alors 80 threads")),(0,o.kt)("h2",{id:"amber"},"AMBER"),(0,o.kt)("p",null,"AMBER (Assisted Model Building with Energy Refinement) est un ensemble de programmes destin\xe9s \xe0 la simulation de biomol\xe9cules par dynamique mol\xe9culaire. Il repose sur des champs de force pr\xe9cis et est couramment employ\xe9 en chimie computationnelle et en biophysique pour l\u2019\xe9tude des interactions et de la stabilit\xe9 des syst\xe8mes biologiques."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n#!/bin/bash\n#SBATCH -N 1\n#SBATCH -n 2\n#SBATCH --gres=gpu:2\n#SBATCH -p small\n#SBATCH --ntasks-per-node=2\n\nmodule purge\nmodule load amber/gnu/25\nsource $AMBERSH\n\nmpirun -n 2 pmemd.cuda_SPFP.MPI -O -i mdin5 -o overall_output.out -p sys.prmtop -c sys4.rst  -inf mdinfo5 -x sys4rot5.mdcrd\n\n")),(0,o.kt)("admonition",{title:"Important",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"N'oubliez pas ",(0,o.kt)("inlineCode",{parentName:"p"},"source $AMBERSH")," ")))}c.isMDXComponent=!0}}]);