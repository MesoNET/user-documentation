"use strict";(self.webpackChunkmesodocs=self.webpackChunkmesodocs||[]).push([[2800],{4137:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return n?o.createElement(h,i(i({ref:t},u),{},{components:n})):o.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},295:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=n(7462),r=(n(7294),n(4137));const a={title:"For Gray Scott School attendants",sidebar_position:8},i="Attend GrayScott school with Juliet",l={unversionedId:"code_form/juliet/grayscott",id:"code_form/juliet/grayscott",title:"For Gray Scott School attendants",description:"Connect to juliet",source:"@site/docs/code_form/juliet/grayscott.md",sourceDirName:"code_form/juliet",slug:"/code_form/juliet/grayscott",permalink:"/documentation/user-documentation/code_form/juliet/grayscott",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"For Gray Scott School attendants",sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Troubleshooting",permalink:"/documentation/user-documentation/code_form/juliet/troubleshooting"},next:{title:"Utiliser VS code server",permalink:"/documentation/user-documentation/code_form/juliet/vscode"}},s={},c=[{value:"Connect to juliet",id:"connect-to-juliet",level:2},{value:"Access your classes",id:"access-your-classes",level:2},{value:"Connect to a compute node",id:"connect-to-a-compute-node",level:2},{value:"Do not compute on juliet1",id:"do-not-compute-on-juliet1",level:3},{value:"Default process to access compute nodes",id:"default-process-to-access-compute-nodes",level:3},{value:"For podman users",id:"for-podman-users",level:3},{value:"Run the containers",id:"run-the-containers",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"attend-grayscott-school-with-juliet"},"Attend GrayScott school with Juliet"),(0,r.kt)("h2",{id:"connect-to-juliet"},"Connect to juliet"),(0,r.kt)("p",null,"You have received a login and password by e-mail. You may connect to juliet using these logins and password by typing in a command prompt (ex: PowerShell for windows)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ssh username@juliet.mesonet.fr\n")),(0,r.kt)("p",null,"Then, enter your password when prompt. Your typing may not show on your terminal, this is intended."),(0,r.kt)("h2",{id:"access-your-classes"},"Access your classes"),(0,r.kt)("p",null,"Most of the classes use apptainer containers. These containers are on the directory /projects/m25065/containers/"),(0,r.kt)("p",null,"The file at path ",(0,r.kt)("inlineCode",{parentName:"p"},"/projects/m25065-students/container_list.txt")," contains the association between a class and a container"),(0,r.kt)("h2",{id:"connect-to-a-compute-node"},"Connect to a compute node"),(0,r.kt)("h3",{id:"do-not-compute-on-juliet1"},"Do not compute on juliet1"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"juliet1")," on which you first connect is a login node, which is shared between all users and not made to run computations."),(0,r.kt)("p",null,"To be able to run the codes you must be on a compute node which is either ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet2")," ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet3")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet4"),". In case of a doubt, type the command"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"hostname")),(0,r.kt)("p",null,"to know where you are."),(0,r.kt)("h3",{id:"default-process-to-access-compute-nodes"},"Default process to access compute nodes"),(0,r.kt)("p",null,"To connect to a compute node you will need to use slurm"),(0,r.kt)("p",null,"By default you can run the command:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"srun --partition=mesonet --account=m25065-students --time=10:00:00 --mem=64G -c 16 --pty /bin/bash")),(0,r.kt)("p",null,"If you need a GPU, run the command "),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"srun --partition=mesonet --account=m25065-students --time=10:00:00 -c 16 --mem=64G --gres=gpu:1 --pty /bin/bash")),(0,r.kt)("p",null,"Due to a technical issue, for your job to properly take GPUs into account you will need to enter this command as soon as you connect to a compute node"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"export CUDA_VISIBLE_DEVICES=$SLURM_JOB_GPUS")),(0,r.kt)("p",null,"Both commands will open a terminal on a compute node."),(0,r.kt)("h3",{id:"for-podman-users"},"For podman users"),(0,r.kt)("p",null,"While we mainly use apptainer, you can use podman on every container of the school if you know how to use it. You will need the adresse on the ",(0,r.kt)("a",{parentName:"p",href:"https://cta-lapp.pages.in2p3.fr/cours/gray_scott_revolutions/grayscottrevolution/7-5161.html"},"Container List time table")),(0,r.kt)("p",null,"With a few exceptions containers have not been tested with podman so choose this option if you know what you are doing."),(0,r.kt)("p",null,"If you want to use podman use ",(0,r.kt)("inlineCode",{parentName:"p"},"salloc")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"srun")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"salloc --partition=mesonet --account=m25065-students --time=10:00:00 --mem=64G")),(0,r.kt)("p",null,"OR"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"salloc --partition=mesonet --account=m25065-students --time=10:00:00 --mem=64G --gres=gpu:1")),(0,r.kt)("p",null,"then"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"}," ssh julietX")),(0,r.kt)("p",null,"where julietX can be ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet2"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet3")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"juliet4")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE"),": For the RUST classes, it is recommended to use this approach."),(0,r.kt)("h2",{id:"run-the-containers"},"Run the containers"),(0,r.kt)("p",null,"To run the containers you can run the command"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"apptainer shell path/to/container.sif")),(0,r.kt)("p",null,"Alternatively, you can run a bash script that will do it for you. Bash scripts for classes are available at"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"bash /projects/m25065-students/scripts/")," and have the same name as the container with .sh instead of .sif"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," /!\\ MAKE SURE YOU ARE CONNECTED TO A COMPUTE NODE BEFORE STARTING A CONTAINER OR A SCRIPT /!\\ ")))}d.isMDXComponent=!0}}]);