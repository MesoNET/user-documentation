<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-arch_exp/boreal/stockage">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Le stockage | Documentation de MesoNET</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/documentation/user-documentation/img/logomeso.png"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/documentation/user-documentation/img/logomeso.png"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/documentation/user-documentation/arch_exp/boreal/stockage"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Le stockage | Documentation de MesoNET"><meta data-rh="true" name="description" content="L&#x27;utilisateur a un espace de travail personnel dans /home/project_name/username."><meta data-rh="true" property="og:description" content="L&#x27;utilisateur a un espace de travail personnel dans /home/project_name/username."><link data-rh="true" rel="icon" href="/documentation/user-documentation/img/faviconM.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/documentation/user-documentation/arch_exp/boreal/stockage"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/documentation/user-documentation/arch_exp/boreal/stockage" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/documentation/user-documentation/arch_exp/boreal/stockage" hreflang="x-default"><link rel="stylesheet" href="/documentation/user-documentation/assets/css/styles.89ad5c2c.css">
<link rel="preload" href="/documentation/user-documentation/assets/js/runtime~main.fd191418.js" as="script">
<link rel="preload" href="/documentation/user-documentation/assets/js/main.d8267aae.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/user-documentation/"><div class="navbar__logo"><img src="/documentation/user-documentation/img/logomeso.png" alt="MesoNet Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/documentation/user-documentation/img/logomeso.png" alt="MesoNet Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/documentation/user-documentation/">Documentation</a><a href="https://acces.mesonet.fr/gramc-meso/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Portail</a><a href="https://mesonet.fr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Site web</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/user-documentation/">Accueil</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/documentation/user-documentation/category/le-portail-mesonet">Le portail MesoNET</a><button aria-label="Toggle the collapsible sidebar category &#x27;Le portail MesoNET&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/documentation/user-documentation/category/machine-codeformation">Machine Code/Formation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Machine Code/Formation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/documentation/user-documentation/category/architectures-de-prototypage-et-spécialisées">Architectures de Prototypage et Spécialisées</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architectures de Prototypage et Spécialisées&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/description">Boreale, la machine vectorielle</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/description">Description</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/connexion">Se connecter à Boréale</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/stockage">Le stockage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/jobs">Lancer un calcul</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/user-documentation/arch_exp/boreal/softenv">Environnements logiciels</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/documentation/user-documentation/arch_exp/turpan/">Turpan, la machine ARM</a><button aria-label="Toggle the collapsible sidebar category &#x27;Turpan, la machine ARM&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/documentation/user-documentation/category/tutoriaux">Tutoriaux</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutoriaux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/documentation/user-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/documentation/user-documentation/category/architectures-de-prototypage-et-spécialisées"><span itemprop="name">Architectures de Prototypage et Spécialisées</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Boreale, la machine vectorielle</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Le stockage</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Les espaces de travail sur Boréale</h1><p>L&#x27;utilisateur a un espace de travail personnel dans <code>/home/project_name/username</code>.</p><p>Par défaut un quota disque utilisateur est positionné à 50 Go dans <code>/home</code> ; la commande <code>mmlsquota gpfs2:home</code> fournit le quota et la place que l&#x27;utilisateur occupe dans la partition <code>/home</code>.</p><p>Nous vous encourageons à calculer dans les dossiers de scratch temporaires (<code>/dlocal/run/&lt;jobid&gt;</code> disponible via la variable d&#x27;environnement <code>LOCAL_WORK_DIR</code>) créés par l&#x27;outil de batch Slurm pour chaque calcul. Un quota de 10 millions de fichiers est appliqué sur l&#x27;arborescence <code>/dlocal</code> ; la commande <code>mmlsquota gpfs1:dlocal</code> fournit le quota et le nombre de fichiers vous appartenant dans l&#x27;arborescence <code>/dlocal/run</code>.</p><p>Si vous estimez que ces limites (quotas) sont trop contraignantes pour vous, n&#x27;hésitez pas à ouvrir un ticket auprès du support. Celles-ci peuvent être augmentées sur demande justifiée.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gestion-des-données-sur-la-baie-de-disques">Gestion des données sur la baie de disques<a href="#gestion-des-données-sur-la-baie-de-disques" class="hash-link" aria-label="Direct link to Gestion des données sur la baie de disques" title="Direct link to Gestion des données sur la baie de disques">​</a></h2><p>Les données du calculateur Boréale sont stockées sur une baie de disques accessible sur l&#x27;ensemble du cluster en GPFS. Les performances mesurées lors de la livraison sont de 3,5 Go/s pour la partition <code>/dlocal</code>. Ces partitions sont optimisées pour la lecture/écriture sur des gros fichiers.</p><p>Si vos travaux mettent en jeu une multitude de petits fichiers, prendre contact avec le support afin de mettre en place un accès à une partition plus adaptée à ce type de traitements (voir la suite de la documentation pour les explications).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quelques-commandes-pratiques">Quelques commandes pratiques<a href="#quelques-commandes-pratiques" class="hash-link" aria-label="Direct link to Quelques commandes pratiques" title="Direct link to Quelques commandes pratiques">​</a></h3><p><strong>Combien ai-je de fichiers dans /dlocal ?</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mmlsquota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>lire la ligne gpfs1 dlocal, colonne &quot;files&quot;</p><p><strong>Combien d&#x27;espace disque est-ce que je consomme ?</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mmlsquota</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>En ajoutant --block-size auto à la fin de la commande, vous obtiendrez un affichage au format &quot;humain&quot; (avec l&#x27;unité de valeur la plus adaptée pour un humain)</p><p>Pour un affichage au format humain des quotas sur les espaces home et dlocal uniquement :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mmlsquota --block-size auto | awk &#x27;NR&lt;3;($2==&quot;home&quot;||$2==&quot;dlocal&quot;)&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Comment connaître la liste des dossiers temporaires de calcul de l&#x27;utilisateur nom_login ?</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">find /dlocal/run -type d -mindepth 0 -maxdepth 1 -user nom_login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Comment connaître la liste des calculs soumis dans la partition compute entre le 1/11/2022 et le 15/11/2022 pour faire du ménage ?</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sacct -r compute -S 2022-11-01 -E 2022-11-15</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Vous pouvez rajouter l&#x27;option -l pour afficher plus d&#x27;informations.</p><p><strong>Comment connaître le nombre de fichiers d&#x27;un dossier chemin_dossier ?</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">find chemin_dossier -type f | wc -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>J&#x27;ai besoin de faire diminuer mon nombre de fichiers, mais je ne peux rien supprimer. Comment faire ?</strong></p><p>Archivez certaines arborescences avec la commande tar : une archive = 1 <strong>fichier</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quelques-conseils">Quelques conseils<a href="#quelques-conseils" class="hash-link" aria-label="Direct link to Quelques conseils" title="Direct link to Quelques conseils">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dans-les-scripts-de-soumission">Dans les scripts de soumission...<a href="#dans-les-scripts-de-soumission" class="hash-link" aria-label="Direct link to Dans les scripts de soumission..." title="Direct link to Dans les scripts de soumission...">​</a></h4><p>Le rapatriement des données s&#x27;effectue avec une commande mv. Ne la remplacer surtout pas par un cp, qui duplique les données et qui peut être très longue à s&#x27;exécuter.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="si-vous-développez">Si vous développez...<a href="#si-vous-développez" class="hash-link" aria-label="Direct link to Si vous développez..." title="Direct link to Si vous développez...">​</a></h4><p>Privilégiez les fichiers volumineux avec des formats de type HDF5 plutôt qu&#x27;une multitude de petits fichiers. Vous gagnerez en performances sur les clusters de calcul avec des tailles de blocs importantes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="si-vous-générez-beaucoup-de-fichiers">Si vous générez beaucoup de fichiers...<a href="#si-vous-générez-beaucoup-de-fichiers" class="hash-link" aria-label="Direct link to Si vous générez beaucoup de fichiers..." title="Direct link to Si vous générez beaucoup de fichiers...">​</a></h4><p>Surveillez votre quota. Affichez-le automatiquement lors de la connexion (via ajout approprié dans votre fichier <code>~/.bash_profile</code>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quelques-informations-complémentaires">Quelques informations complémentaires<a href="#quelques-informations-complémentaires" class="hash-link" aria-label="Direct link to Quelques informations complémentaires" title="Direct link to Quelques informations complémentaires">​</a></h3><p><strong><em>Les partitions et leurs usages</em></strong></p><p>La baie de disques est séparée en 2 parties (systèmes de fichiers) contenant chacun des sous parties (filesets).</p><p>La première partie est la plus volumineuse et la plus performante : elle accueille <code>/dlocal</code>.</p><p>La deuxième partie est plus petite mais sur disques SSD pour compenser la perte de performances de la petite taille de blocs : elle accueille <code>/soft</code> et <code>/home</code>.</p><ul><li><code>/home</code> contient les dossiers d&#x27;accueil des utilisateurs.</li><li><code>/dlocal</code> contient les dossiers temporaires des calculs (/dlocal/run) et certains dossiers de calcul permanents (<code>/dlocal/home</code>) quand le besoin est qualifié.</li><li><code>/soft</code> contient les logiciels mis à disposition par le CRIANN</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Aucune sauvegarde n&#x27;est effectuée sur les données utilisateurs. Pensez à rapatrier vos codes et vos données dans vos laboratoires.</p></div></div><p>Nous vous encourageons fortement à utiliser les outils de versioning, tel que GIT, de vos établissements. Renseignez-vous auprès de vos DSI.</p><p>Le client <code>git</code> est installé sur les frontales, sans chargement de module.</p><p><strong><em>Les quotas</em></strong></p><p>Afin de garantir de bonnes performances, il faut maintenir un taux de remplissage de la baie (volumétrie et nombre de fichier) raisonnable. Pour cela, le CRIANN a positionné deux types de quotas :</p><ul><li><code>/home</code> : quota par défaut de 50 Go / utilisateur</li><li><code>/dlocal</code> : quota de 10 millions de fichiers</li></ul><p>Dans les 2 cas, les limites correspondent à des valeurs &quot;soft&quot; pouvant être dépassées temporairement (7 jours). Au delà de ce délai, l&#x27;usage doit redescendre en dessous de la limite soft, sinon, aucune création de fichier n&#x27;est possible. Une limite &quot;hard&quot; avec en général 10 Go supplémentaire est également positionnée : elle ne peut en aucun cas être dépassée.</p><p>Si vous estimez que ces limites sont trop contraignantes pour vous, n&#x27;hésitez pas à ouvrir un ticket auprès du support. Celles-ci peuvent être augmentées sur demande justifiée.</p><p>La commande <code>mmlsquota</code> explique en haut de cette page permet d&#x27;afficher les quotas et les délais de &quot;grace&quot; entre les quotas &quot;soft&quot; et &quot;hard&quot;. Une fois le délai de 7 jours dépassé, toute demande d&#x27;allocation de volumétrie supplémentaire est refusée. Seules les commandes permettant de revenir en dessous du quota &quot;soft&quot; sont permises.</p><p><strong><em>La problématique du nombre de fichiers</em></strong></p><p>Le CRIANN a fait le choix de conserver les dossiers temporaires des calculs (<code>/dlocal/run/&lt;jobid&gt;</code>) au delà de la vie des calculs. Ce dossier peut ainsi être utilisé comme dossier de travail du calcul suivant.</p><p>Ces dossiers sont supprimés automatiquement par le CRIANN, 45 jours après la fin du calcul correspondant. Cela a l&#x27;avantage de pouvoir permettre d&#x27;enchaîner plusieurs calculs et également de récupérer des données qui n&#x27;auraient pas été récupérées en fin de calcul.</p><p>Pour la majeure partie des utilisateurs, en 45 jours, cela correspond à quelques milliers de fichiers. Pour certains utilisateurs de logiciels spécifiques, cela peut représenter plusieurs dizaines de millions de fichiers. Le quota est là pour éviter une dérive, mais la soumission de nouveaux calculs devient impossible si le quota est dépassé : il faut donc faire du ménage en complément du ménage automatique...</p><p>Si vous avez des questions, <a href="mailto:support@criann.fr" target="_blank" rel="noopener noreferrer">merci de contacter le support</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/documentation/user-documentation/arch_exp/boreal/connexion"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Se connecter à Boréale</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/documentation/user-documentation/arch_exp/boreal/jobs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lancer un calcul</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gestion-des-données-sur-la-baie-de-disques" class="table-of-contents__link toc-highlight">Gestion des données sur la baie de disques</a><ul><li><a href="#quelques-commandes-pratiques" class="table-of-contents__link toc-highlight">Quelques commandes pratiques</a></li><li><a href="#quelques-conseils" class="table-of-contents__link toc-highlight">Quelques conseils</a></li><li><a href="#quelques-informations-complémentaires" class="table-of-contents__link toc-highlight">Quelques informations complémentaires</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2024 Mesonet</div></div></div></footer></div>
<script src="/documentation/user-documentation/assets/js/runtime~main.fd191418.js"></script>
<script src="/documentation/user-documentation/assets/js/main.d8267aae.js"></script>
</body>
</html>